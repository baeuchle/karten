<?xml version="1.0" encoding="utf-8" standalone="no"?>
<svg
  xmlns="http://www.w3.org/2000/svg"
  xmlns:xlink="http://www.w3.org/1999/xlink"
  width="100%"
  height="100%"
  viewBox="0 50 740 600"
  onload="initialize()"
   >
 <title>Fahrradfahrten</title>
 <metadata>
  <rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
           xmlns:rdfs="http://www.w3.org/2000/01/rdf-schema#"
           xmlns:dc="http://purl.org/dc/elements/1.1/">
   <rdf:Description>
    <dc:creator><![CDATA[Bjørn Bäuchle <fahrrad at frankfurtium dot de>]]></dc:creator>
    <dc:subject>Fahrrad, Kilometer</dc:subject>
    <dc:description>Meine Fahrradfahrstatistik</dc:description>
    <dc:identifier>http://plan.frankfurtium.de/fahrrad.svg</dc:identifier>
    <dc:relation>http://plan.frankfurtium.de/fahrrad.svg</dc:relation>
    <dc:rights>© Bjørn Bäuchle CC-BY-SA 4.0</dc:rights>
    <dc:format>image/svg+xml</dc:format>
    <dc:type>Image</dc:type>
    <dc:title>Fahrradfahrten</dc:title>
    <dc:date>2016-06-30</dc:date>
    <dc:language>de</dc:language>
   </rdf:Description>
  </rdf:RDF>
 </metadata>
 <style type="text/css"><![CDATA[
  * { fill:none; stroke-width:1px; }
  text { fill:black; stroke: none; font-size: 12pt; }
  text.ylabel { text-anchor: end; }
  text.xlabel { text-anchor: middle; }

  .xaxis path, .yaxis path { stroke: #000000; stroke-width: 1; }
  .xaxis text { text-anchor: middle; border: thin black solid; }
  .yaxis text { text-anchor: end; }
  .xaxis text.xaxislabel, .yaxis text.yaxislabel { font-size: 120%; font-weight: bold; text-anchor: middle; }
  .monthlabel { font-size: 70%; }
  .inletRect { fill: #ffffff; fill-opacity: .2; stroke: #000000; stroke-opacity: .2; }

  .datapoint { stroke: none; fill: #ff0000; fill-opacity: 1; }
  .dataarea { stroke: none; fill: #00c000; fill-opacity: .2; }
  .dataline  { stroke: #000080; fill: none; stroke-width: .5; }
  a { fill: #0000ff; }
  tspan { fill: #000000; }
 ]]>
 </style>
 <script type="application/ecmascript" id="constants"><![CDATA[
  var plotparams = {
    showPosition: false,
    currentPopup: -1,
    popupStay: false,
    x: {
      min: new Date(2005, 0, 1, 0, 0, 0, 0),
      max: new Date(2017, 0, 1, 0, 0, 0, 0),
      del: 12,
      labeltext: "Jahr"
    },
    y: {
      min: 1000,
      max: 13000,
      del: 1000,
      labeltext: "km"
    },
    width: 640,
    height: 490,
    area: "dataarea",
    dataname: "data",
    overflow: true,
    pathdata: ""
  };
  var inletparams = {
    showPosition: false,
    currentPopup: -1,
    popupStay: false,
    x: {
      min: new Date(2015, 7, 1, 0, 0, 0, 0),
      max: new Date(2016, 7, 1, 0, 0, 0, 0),
      del: 2,
      labeltext: ""
    },
    y: {
      min: 5600,
      max: 6600,
      del: 250,
      labeltext: ""
    },
    width: 250,
    height: 150,
    area: "inlet_dataarea",
    dataname: "inletdata",
    overflow: false,
    pathdata: ""
  };

  function get_xpos(xDate, plot) {
    plot = plot ? plot : plotparams;
    var xoffset = xDate - plot.x.min;
    var xlength = plot.x.max - plot.x.min;
    return plot.width * xoffset / xlength;
  }

  function get_ypos(y, plot) {
    plot = plot ? plot : plotparams;
    return (-y + plot.y.min) / (plot.y.max - plot.y.min) * plot.height;
  }

  function get_size(element) {
    var localwidth = element.clientWidth || element.offsetWidth || element.scrollWidth;
    var localheight = element.clientHeight || element.offsetHeight || element.scrollHeight;
    if (!localwidth && !localheight) {
      localwidth = Number(element.getAttribute("width"));
      localheight = Number(element.getAttribute("height"));
    }
    if (!localwidth && !localheight) {
      var rect = element.getBoundingClientRect();
      var ul = document.documentElement.createSVGPoint();
      var dr = document.documentElement.createSVGPoint();
      ul.x = 0; ul.y = 0;
      dr.x = rect.width; dr.y = rect.height;
      var matrix = element.getScreenCTM().inverse();
      ul = ul.matrixTransform(matrix);
      dr = dr.matrixTransform(matrix);
      localwidth = Math.abs(dr.x - ul.x);
      localheight = Math.abs(dr.y - ul.y);
    }
    return { width: localwidth, height: localheight };
  }
 ]]></script>
 <script type="application/ecmascript" id="data"><![CDATA[
var fahrrad = [
 { date : new Date("2001-05-22"), distance :    0, link: "", text : "19. Geburtstag: Fahrrad bekommen" },
 { date : new Date("2005-09-03"), distance : 3390, geo: [50.1852,  8.6650 ], ort: "Frankfurt" },
 { date : new Date("2005-09-04"), distance : 3452, geo: [50.1672,  9.0317 ], ort: "Langenselbold" },
 { date : new Date("2005-09-05"), distance : 3542, geo: [50.4664,  9.7049 ], ort: "Rothemann" },
 { date : new Date("2005-09-06"), distance : 3619, geo: [50.86848, 9.70303], ort: "Bad Hersfeld" },
 { date : new Date("2005-09-07"), distance : 3705, geo: [50.9095, 10.3020 ], ort: "Altenberger See" },
 { date : new Date("2005-09-08"), distance : 3778, geo: [50.7310, 10.7561 ], ort: "Talsperre Lütsche" },
 { date : new Date("2005-09-09"), distance : 3851, geo: [50.50397,11.14649], ort: "Neuhaus am Rennweg" },
 { date : new Date("2005-09-10"), distance : 3930, geo: [50.5152, 11.7291 ], ort: "Saalburg" },
 { date : new Date("2005-09-11"), distance : 3990, geo: [50.6191, 11.5077 ], ort: "Saalthal" },
 { date : new Date("2005-09-12"), distance : 4073, geo: [50.9366, 11.6082 ], ort: "Jena" },
 { date : new Date("2005-09-13"), distance : 4121, geo: [51.1745, 11.8063 ], ort: "Naumburg (Saale)" },
 { date : new Date("2005-09-14"), distance : 4199, geo: [51.5109, 11.9556 ], ort: "Halle (Saale)" },
 { date : new Date("2005-09-15"), distance : 4297, geo: [51.9589, 11.9057 ], ort: "Barby" },
 { date : new Date("2005-09-16"), distance : 4371, geo: [52.2209, 11.6587 ], ort: "Barleben" },
 { date : new Date("2005-09-17"), distance : 4463, geo: [52.6753, 12.0021 ], ort: "Arneburg" },
 { date : new Date("2005-09-18"), distance : 4573, geo: [53.0949, 11.4802 ], ort: "Lenzen (Elbe)" },
 { date : new Date("2005-09-19"), distance : 4672, geo: [53.642 , 11.416  ], ort: "Schwerin" },
 { date : new Date("2005-09-20"), distance : 4752, geo: [53.9115, 11.4312 ], ort: "Seebad Wendorf" },
 { date : new Date("2006-06-20"), distance : 5901, link: "http://baeuchle.frankfurtium.de/2006-06/projekt-6000/", text: "Projekt 6000" },
 { date : new Date("2006-06-21"), distance : 5916, link: "http://baeuchle.frankfurtium.de/2006-06/projekt-6000/", text: "Projekt 6000" },
 { date : new Date("2006-06-22"), distance : 5928, link: "http://baeuchle.frankfurtium.de/2006-06/projekt-6000/", text: "Projekt 6000" },
 { date : new Date("2006-06-27"), distance : 5953, link: "http://baeuchle.frankfurtium.de/2006-06/projekt-6000/", text: "Projekt 6000" },
 { date : new Date("2006-07-13"), distance : 6009, link: "http://baeuchle.frankfurtium.de/2006-06/projekt-6000/", text: "Projekt 6000" },
 { date : new Date("2006-08-26"), distance : 6300, link: "http://baeuchle.frankfurtium.de/2006-08/projekt-7000/", text: "Projekt 7000" },
 { date : new Date("2006-09-10"), distance : 6500, link: "http://baeuchle.frankfurtium.de/2006-09/halbe-miete-und-handys/", text: "Halbe Miete und Handys" },
 { date : new Date("2006-10-31"), distance : 6888, link: "http://baeuchle.frankfurtium.de/2006-10/ruskevaer/", text: "Ruskevær" },
 { date : new Date("2006-12-05"), distance : 7013, link: "", text: "Quelle: Kalender" },
 { date : new Date("2006-12-06"), distance : 7025, link: "", text: "Quelle: Kalender" },
 { date : new Date("2006-12-07"), distance : 7035, link: "", text: "Quelle: Kalender" },
 { date : new Date("2006-12-08"), distance : 7045, link: "", text: "Quelle: Kalender" },
 { date : new Date("2007-07-16"), distance : 7355, link: "http://baeuchle.frankfurtium.de/2007-07/siste-innforing-om-norge/", text: "Siste Innføring om Norge" },
 { date : new Date("2008-09-05"), distance : 7977, geo: [50.1852, 8.6650], ort: "Frankfurt" },
 { date : new Date("2008-09-06"), distance : 8046, geo: [48.0372, 7.5816], ort: "Breisach" },
 { date : new Date("2008-09-07"), distance : 8146, geo: [48.6676, 7.9381], ort: "Rheinau-Freistett" },
 { date : new Date("2008-09-08"), distance : 8294, geo: [49.4768, 8.4643], ort: "Mannheim" },
 { date : new Date("2008-09-09"), distance : 8376, geo: [50.0010, 8.2588], ort: "Mainz" },
 { date : new Date("2009-07-06"), distance : 9208, geo: [69.6788, 18.9074], ort: "Tromsø" },
 { date : new Date("2009-07-07"), distance : 9239, geo: [71.0275, 25.8921], ort: "Honningsvåg" },
 { date : new Date("2009-07-08"), distance : 9365, geo: [70.7398, 25.6675], ort: "Repvåg" },
 { date : new Date("2009-07-09"), distance : 9437, geo: [70.4317, 24.5039], ort: "Skai'di" },
 { date : new Date("2009-07-10"), distance : 9540, geo: [69.933 , 23.112 ], ort: "Kvenvikmoen" },
 { date : new Date("2009-07-11"), distance : 9696, geo: [69.831 , 21.186 ], ort: "Fosselva" },
 { date : new Date("2009-07-12"), distance : 9782, geo: [69.6648, 19.8125], ort: "Svensvik" },
 { date : new Date("2009-07-13"), distance : 9863, geo: [69.6593, 18.9347], ort: "Tromsø" },
 { date : new Date("2009-07-14"), distance : 9855, geo: [69.6593, 18.9347], ort: "Tromsø" },
 { date : new Date("2009-07-15"), distance :10008, geo: [69.97  , 18.49  ], ort: "Nordli" },
 { date : new Date("2009-07-16"), distance :10116, geo: [68.4385, 17.4303], ort: "Narvik" },
 { date : new Date("2009-07-17"), distance :10216, geo: [68.1322, 15.8939], ort: "Sørkil" },
 { date : new Date("2009-07-18"), distance :10255, geo: [67.9635, 15.9303], ort: "Innhavet" },
 { date : new Date("2012-01-06"), distance :10882, link: "http://baeuchle.frankfurtium.de/2012-01/projekt-11000/", text: "Projekt 11000" },
 { date : new Date("2012-02-28"), distance :11000, link: "http://baeuchle.frankfurtium.de/2012-03/tagestrip-nach-amsterdam/", text: "Tagestrip nach Amsterdam" },
 { date : new Date("2012-03-12"), distance :11162, link: "http://baeuchle.frankfurtium.de/2012-03/tagestrip-nach-amsterdam/", text: "Tagestrip nach Amsterdam" },
 { date : new Date("2012-04-05"), distance :11400, link: "http://baeuchle.frankfurtium.de/2012-04/fleischlos/", text: "Fleischlos" },
 { date : new Date("2012-04-25"), distance :11600, geo: [50.4308, 7.4743], ort: "Neuwied" },
 { date : new Date("2012-04-26"), distance :11652, geo: [50.6474, 7.2229], ort: "Bad Honnef" },
 { date : new Date("2012-04-27"), distance :11757, geo: [51.2163, 6.7822], ort: "Düsseldorf" },
 { date : new Date("2012-04-28"), distance :11828, geo: [51.6294, 6.5792], ort: "Wesel-Büderich" },
 { date : new Date("2012-04-29"), distance :11891, geo: [51.8625, 6.0378], ort: "Millingen a. d. Rijn" },
 { date : new Date("2012-04-30"), distance :11920, geo: [51.8432, 5.8528], ort: "Nijmegen" },
 { date : new Date("2012-10-10"), distance :12569, link: "http://baeuchle.frankfurtium.de/2012-10/projekt-13000-und-weitere-plaene-fuer-2012/", text: "Projekt 13000 und weitere Pläne für 2012" },
 { date : new Date("2012-12-20"), distance :13000, link: "http://baeuchle.frankfurtium.de/2012-12/projekt-14000/", text: "Projekt 14000" },
 { date : new Date("2013-02-26"), distance :13013, link: "http://baeuchle.frankfurtium.de/2013-02/statistik-2012/", text: "Statistik 2012" },
 { date : new Date("2013-02-28"), distance :13041, link: "http://baeuchle.frankfurtium.de/2013-02/statistik-2012/", text: "Statistik 2012" },
 { date : new Date("2013-04-02"), distance :13055, link: "http://baeuchle.frankfurtium.de/2013-04/fleischlos-und-kein-alkohol/", text: "Fleischlos und kein Alkohol" },
 { date : new Date("2013-04-08"), distance :13067, link: "http://baeuchle.frankfurtium.de/2013-05/alles-neu-macht-der-mai/", text: "Alles neu macht der Mai" },
 { date : new Date("2013-05-12"), distance :    0, link: "http://baeuchle.frankfurtium.de/2013-05/alles-neu-macht-der-mai/", text: "Alles neu macht der Mai" },
 { date : new Date("2013-12-31"), distance :  805, link: "http://baeuchle.frankfurtium.de/2014-02/auf-nach-niederursel/", text: "Auf nach Niederursel" },
 { date : new Date("2014-08-09"), distance : 2050, geo: [49.8501, 11.6281], ort: "Creußen" },
 { date : new Date("2014-08-10"), distance : 2141, geo: [50.1463, 11.0604], ort: "Lichtenfels" },
 { date : new Date("2014-08-11"), distance : 2186, geo: [49.8890, 10.8829], ort: "Bamberg" },
 { date : new Date("2014-08-12"), distance : 2273, geo: [49.8762, 10.1675], ort: "Fahr" },
 { date : new Date("2014-08-13"), distance : 2373, geo: [49.9628,  9.7667], ort: "Karlstadt" },
 { date : new Date("2014-08-14"), distance : 2465, geo: [49.7798,  9.3821], ort: "Dorfprozellen" },
 { date : new Date("2014-08-15"), distance : 2561, geo: [50.1328,  8,9170], ort: "Hanau" },
 { date : new Date("2014-08-16"), distance : 2627, geo: [50.0073,  8.2820], ort: "Mainz-Kastel" },
 { date : new Date("2015-01-05"), distance : 3759, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-01-12"), distance : 3828, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-01-19"), distance : 3869, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-01-26"), distance : 3901, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-02-02"), distance : 3949, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-02-09"), distance : 3991, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-02-16"), distance : 4039, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-02-23"), distance : 4147, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-03-02"), distance : 4208, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-03-09"), distance : 4354, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-03-16"), distance : 4407, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-03-23"), distance : 4478, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-03-30"), distance : 4540, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-03-31"), distance : 4542, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-04-26"), distance : 4559, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-05-03"), distance : 4593, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-05-10"), distance : 4678, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-05-22"), distance : 4759, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-05-24"), distance : 4807, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-06-07"), distance : 4908, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-06-14"), distance : 4960, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-06-21"), distance : 5047, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-06-28"), distance : 5111, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-07-05"), distance : 5203, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-07-12"), distance : 5361, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-07-19"), distance : 5487, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-07-26"), distance : 5549, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-08-02"), distance : 5612, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-08-09"), distance : 5666, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-08-16"), distance : 5735, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-08-18"), distance : 5759, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-08-23"), distance : 5777, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-08-30"), distance : 5778, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-09-06"), distance : 5778, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-09-13"), distance : 5791, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-09-20"), distance : 5942, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-09-27"), distance : 5948, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-10-04"), distance : 6019, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-10-11"), distance : 6025, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-10-18"), distance : 6039, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-10-25"), distance : 6039, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-11-01"), distance : 6046, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-11-08"), distance : 6064, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-11-15"), distance : 6073, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-11-22"), distance : 6076, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-11-29"), distance : 6086, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2015-12-06"), distance : 6093, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-01-03"), distance : 6093, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-01-10"), distance : 6103, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-01-17"), distance : 6126, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-02-07"), distance : 6126, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-02-14"), distance : 6171, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-02-21"), distance : 6178, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-02-28"), distance : 6200, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-03-06"), distance : 6214, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-03-13"), distance : 6229, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-04-10"), distance : 6255, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-04-24"), distance : 6262, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-05-01"), distance : 6269, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-05-08"), distance : 6281, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-05-15"), distance : 6307, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-05-22"), distance : 6340, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-05-29"), distance : 6354, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-06-05"), distance : 6372, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-06-12"), distance : 6441, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-06-19"), distance : 6482, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-06-26"), distance : 6504, link: "", text: "Quelle: Protokoll" },
 { date : new Date("2016-07-03"), distance : 6555, link: "", text: "Quelle: Protokoll" },
];
var regionen = [
 { date: [ new Date("2005-09-03"), new Date("2005-09-20")], dateText: "September 2005", km: [ 3390,  4752], link: "", text: "Fahrradtour zur Ostsee mit Caro und Derek B." },
 { date: [ new Date("2006-08-02"), new Date("2007-07-16")], dateText: "Aug 2008 - Jun 2007", km: [ 6020,  7355], link: "http://baeuchle.frankfurtium.de/tags/norge/", text: "Jahr in Norwegen" },
 { date: [ new Date("2008-09-05"), new Date("2008-09-09")], dateText: "September 2008", km: [ 7977,  8376], link: "http://baeuchle.frankfurtium.de/2008-11/fahrradurlaub-am-rhein/", text: "Fahrradurlaub am Rhein" },
 { date: [ new Date("2009-07-06"), new Date("2009-07-18")], dateText: "Juli 2009", km: [ 9208, 10255], link: "http://baeuchle.frankfurtium.de/2010-03/norwegen-2009/", text: "Norwegen 2009" },
 { date: [ new Date("2012-04-25"), new Date("2012-04-30")], dateText: "April 2012", km: [11600, 11920], link: "http://baeuchle.frankfurtium.de/2012-05/niederrhein/", text: "Niederrhein (Stand geschätzt)" },
 { date: [ new Date("2013-04-13"), new Date("2013-05-12")], dateText: "Mai 2013", km: [ 3266,  9800], kmText: " ", link: "http://baeuchle.frankfurtium.de/2013-05/alles-neu-macht-der-mai/", text: "Neues Fahrrad" },
 { date: [ new Date("2014-08-09"), new Date("2014-08-16")], dateText: "August 2014", km: [ 2050,  2627], link: "http://www.mainradweg.com/", text: "Mainradweg (Stand geschätzt)" },
 ];
 ]]></script>
 <script type="application/ecmascript" id="initialize_data"><![CDATA[
  function drawData(plot) {
    if (plot.overflow) {
      for (var i = 0; i < regionen.length; ++i) {
        drawRegion(regionen[i], i, plot);
      }
    }
    plot.pathdata = "M ";
    for (var i = 0; i < fahrrad.length; ++i) {
      drawPoint(fahrrad[i], i, plot);
    }
    plot.pathdata = plot.pathdata.substr(0, plot.pathdata.length - 2);
    var pathobj = document.createElementNS("http://www.w3.org/2000/svg", 'path');
    pathobj.setAttribute("d", plot.pathdata);
    pathobj.setAttribute("class", "dataline");
    var area = document.getElementById(plot.area);
    area.insertBefore(pathobj, area.firstChild);
  }

  function drawRegion(value, index, plot) {
    var area = document.createElementNS("http://www.w3.org/2000/svg", 'ellipse');
    document.getElementById(plot.area).appendChild(area);
    area.setAttribute("class", plot.area);
    area.setAttribute("id", "area" + index);
    var lowx = get_xpos(value.date[0], plot) / 2;
    var hihx = get_xpos(value.date[1], plot) / 2;
    var midx = lowx + hihx;
    var lowy = get_ypos(value.km[0], plot) / 2;
    var hihy = get_ypos(value.km[1], plot) / 2;
    var midy = lowy + hihy;
    area.setAttribute("rx", Math.max(20, 5 + Math.abs(hihx - lowx)));
    area.setAttribute("ry", Math.max(20, 5 + Math.abs(hihy - lowy)));
    area.setAttribute("cx", midx);
    area.setAttribute("cy", midy);
    area.setAttribute("onmouseover", "onto_point(make_datapoint(regionen[" + index + "]), " + (fahrrad.length + index) + ", evt)");
    area.setAttribute("onmouseout", "away_point()");
    area.setAttribute("onclick", "click_point(make_datapoint(regionen[" + index + "]), " + (fahrrad.length + index) + ", evt)");
  }

  function make_datapoint(region) {
    var midx = (region.date[0].getTime() + region.date[1].getTime()) / 2;
    var midy = (region.km[0] + region.km[1]) / 2;
    return {
      date: new Date(midx),
      datetext: region.dateText,
      distance: midy,
      kmtext: region.kmText ? region.kmText : region.km[0] + " km – " + region.km[1] + " km",
      text: region.text,
      link: region.link
    };
  }

  function drawPoint(value, index, plot) {
    if (! plot.overflow && (value.date < plot.x.min || value.date > plot.x.max || value.distance < plot.y.min || value.distance > plot.y.max)) {
      return;
    }
    var point = document.createElementNS("http://www.w3.org/2000/svg", 'circle'); 
    document.getElementById(plot.area).appendChild(point);
    point.setAttribute("class", "datapoint");
    point.setAttribute("id", plot.dataname + index);
    point.setAttribute("r", "2");
    point.setAttribute("cx", get_xpos(value.date, plot));
    point.setAttribute("cy", get_ypos(value.distance, plot));
    if (plot.overflow) {
      point.setAttribute("onmouseover", "onto_point(fahrrad[" + index + "], " + index + ", evt)");
      point.setAttribute("onmouseout", "away_point()");
      point.setAttribute("onclick", "click_point(fahrrad[" + index + "], " + index + ", evt)");
    }
    plot.pathdata += "" + get_xpos(value.date, plot) + "," + get_ypos(value.distance, plot) + " L ";
  }
 ]]></script>
 <script type="application/ecmascript" id="initialize"><![CDATA[
  function initialize() {
     drawInlet(inletparams, plotparams);
     drawXaxis(document.getElementById("xaxis"), plotparams)
     drawYaxis(document.getElementById("yaxis"), plotparams)
     drawData(plotparams);
     //
     drawXaxis(document.getElementById("inlet_xaxis"), inletparams)
     drawYaxis(document.getElementById("inlet_yaxis"), inletparams)
     drawData(inletparams);
  }

  function drawXaxis(group, plot) {
    for (var x = plot.x.min.getFullYear(); x <= plot.x.max.getFullYear(); x += 1) {
      for (var m = 0; m < 12; m += plot.x.del) {
        var xDate = new Date(x, m, 1, 0, 0, 0);
        if (xDate < plot.x.min || xDate > plot.x.max) {
          continue;
        }
        var label = document.createElementNS("http://www.w3.org/2000/svg", 'text');
        var tic = document.createElementNS("http://www.w3.org/2000/svg", 'path');
        group.appendChild(label);
        group.appendChild(tic);

        var xpos = get_xpos(xDate, plot);
        if (m == 0) {
          label.textContent = xDate.getFullYear();
          label.setAttribute("y", 1.5 * get_size(label).height);
        } else {
          var text = "0" + (1 + xDate.getMonth());
          label.textContent = text.substr(text.length - 2);
          label.setAttribute("class", "monthlabel");
          label.setAttribute("y", 1.0 * get_size(label).height);
        }
        label.setAttribute("x", xpos);
        tic.setAttribute("d", "M " + xpos + ",0 v -5");
      }
    }
    var axislabel = document.createElementNS("http://www.w3.org/2000/svg", 'text');
    group.appendChild(axislabel);
    axislabel.textContent = plot.x.labeltext;
    axislabel.setAttribute("class", "xaxislabel");
    axislabel.setAttribute("x", plot.width / 2);
    axislabel.setAttribute("y", 1.5 * get_size(group.firstChild).height + get_size(axislabel).height);
  }

  function drawYaxis(group, plot) {
    for (var y = plot.y.min; y <= plot.y.max; y += plot.y.del) {
      var label = document.createElementNS("http://www.w3.org/2000/svg", 'text');
      group.appendChild(label);
      var tic = document.createElementNS("http://www.w3.org/2000/svg", 'path');
      group.appendChild(tic);

      var ypos = get_ypos(y, plot);
      label.textContent = y;
      label.setAttribute("y", ypos + get_size(label).height / 3);
      label.setAttribute("x", - get_size(label).height / 2);
      tic.setAttribute("d", "M 0," + ypos + " h 5");
    }
    var axislabel = document.createElementNS("http://www.w3.org/2000/svg", 'text');
    group.appendChild(axislabel);
    axislabel.textContent = plot.y.labeltext;
    var x = - get_size(group.lastChild.previousSibling.previousSibling).width - 5;
    var y = -plot.height / 2;
    axislabel.setAttribute("transform", "translate(" + x + "," + y + ") rotate(-90)");
    axislabel.setAttribute("class", "yaxislabel");
  }

  function drawInlet(inlet, plot) {
    var inletRect = document.createElementNS("http://www.w3.org/2000/svg", 'rect');
    document.getElementById(plot.area).appendChild(inletRect);
    var upper = get_ypos(inlet.y.max, plot);
    var lower = get_ypos(inlet.y.min, plot);
    var left = get_xpos(inlet.x.min, plot);
    var right = get_xpos(inlet.x.max, plot);
    inletRect.setAttribute("x", left);
    inletRect.setAttribute("y", upper);
    inletRect.setAttribute("width", right - left);
    inletRect.setAttribute("height", lower - upper);
    inletRect.setAttribute("class", "inletRect");
  }
 ]]></script>
 <script type="application/ecmascript" id="show_coordinates"><![CDATA[
  function toggle_coordinateshow(evt) {
    plotparams.showPosition = !plotparams.showPosition;
    document.getElementById("koordinaten").setAttribute("visibility", plotparams.showPosition ? 'shown' : 'hidden');
    showcoordinates(evt);
  }

  function showcoordinates(evt) {
    if (! plotparams.showPosition) {
      return;
    }
    var coordinate_point = getCoordinatePoint(evt);

    // plot_point is between 0 and 1 for both dimensions:
    var plot_point = document.documentElement.createSVGPoint();
    plot_point.x =  coordinate_point.x / plotparams.width;
    plot_point.y = -coordinate_point.y / plotparams.height;
    var date = new Date(plotparams.x.min.getTime() + (plotparams.x.max.getTime() - plotparams.x.min.getTime())*plot_point.x);
    var xText = dateFormat(date);
    var yText = (plot_point.y * (plotparams.y.max - plotparams.y.min) + plotparams.y.min).toFixed(2) + " km";

    var textElement = document.getElementById("koordinaten");
    textElement.firstChild.data = yText + " / " + xText;
    textElement.setAttribute("y", get_size(textElement).height);

    // positioning of text field:
    setNodePosition(textElement, textElement, coordinate_point);
  }

  // node: the element whose position is set
  // sizer: the element whose size is used,
  // position: the position of the mouse
  function setNodePosition(node, sizer, position) {
    var x;
    var y;
    var localsize = get_size(sizer);
    if (localsize.width + position.x > plotparams.width - 10) {
      x = position.x - 10 - localsize.width;
    } else {
      x = position.x + 10;
    }

    if (localsize.height + position.y > -5) {
      y = - (localsize.height + 2);
    } else {
      y = position.y + 2;
    }
    node.setAttribute("transform", "translate(" + x + "," + y + ")");
  }

  function dateFormat(date) 
  {
    return ("0" + date.getDate()).slice(-2) + "." + ("0" + (date.getMonth() + 1)).slice(-2) + "." + date.getFullYear();
  }

  function getCoordinatePoint(evt) {
    var coordinate_matrix = evt.target.getScreenCTM().inverse();
    var client_point = document.documentElement.createSVGPoint();
    client_point.x = evt.clientX;
    client_point.y = evt.clientY;
    return client_point.matrixTransform(coordinate_matrix);
  }
 ]]></script>
 <script type="application/ecmascript" id="showdata"><![CDATA[
   function onto_point(data, index, evt) {
     // kein Popup da? Zeige Popup bei aktuellem Punkt.
     if (plotparams.currentPopup == -1) {
       showpoint(data, evt);
       plotparams.currentPopup = index;
     }
     // Popup da? Mache nix!
   }

   function away_point() {
     // Es sollte ein Popup da sein, aber wenn nicht, ist es nicht schlimm
     // wir sollen nicht auf Popup bleiben? Dann verstecke es wieder!
     if (! plotparams.popupStay) {
       hidepoint();
     }
   }

  function click_point(data, index, evt) {
     // kein Popup da? Zeige Popup und Lass es da!
     if (plotparams.currentPopup == -1) {
       showpoint(data, evt);
       plotparams.popupStay = true;
       return;
     }
     // clicken auf aktuellen Punkt / aktuelles popup: Toggle plotparams.popupStay
     if (plotparams.currentPopup == index) {
       plotparams.popupStay = ! plotparams.popupStay;
       if (! plotparams.popupStay) {
         hidepoint();
       }
       return;
     }
     if (plotparams.popupStay) {
       showpoint(data, evt);
       plotparams.currentPopup = index;
       return;
     }
     hidepoint();
     plotparams.popupStay = false;
     return;
   }
  
   function showpoint(data, evt) {
     // find elements:
     var datainfogroup = document.getElementById("datainfo");
     var bg_rect = document.getElementById("datainfo_background");
     var date_text = document.getElementById("datainfo_date");
     var dist_text = document.getElementById("datainfo_value");
     var desc_text = document.getElementById("datainfo_description");
     var geo__text = document.getElementById("datainfo_geo");
     // show popup, hide coordinates
     datainfogroup.setAttribute("visibility", "shown");
     document.getElementById("koordinaten").setAttribute("visibility", 'hidden');
     // set date and km text
     date_text.textContent = data.datetext ? data.datetext : dateFormat(data.date);
     dist_text.textContent = data.kmtext ? data.kmtext : (data.distance + " km");
     // description: Clear
     while (desc_text.firstChild) {
       desc_text.removeChild(desc_text.firstChild);
     }
     if (! data.link) {
       desc_text.textContent = data.text;
     } else {
       desc_text.textContent = null;
       var link = document.createElementNS("http://www.w3.org/2000/svg", 'a');
       link.href = data.link;
       link.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", data.link);
       link.setAttribute("target", "_parent");
       link.textContent = data.text;
       desc_text.appendChild(link);
     }
     // geo: clear
     while (geo__text.firstChild) {
       geo__text.removeChild(geo__text.firstChild);
     }
     if (data.geo && data.geo.length > 1) {
       var ort = data.ort ? data.ort : data.geo[0] + "," + data.geo[1];
       if (data.ort) {
         var intext = document.createElementNS("http://www.w3.org/2000/svg", 'tspan');
         geo__text.appendChild(intext);
         intext.textContent = 'in ';
       }
       var geolink = document.createElementNS("http://www.w3.org/2000/svg", 'a'); 
       geo__text.appendChild(geolink);
       var osm_link = "http://osm.org/go/" + makeShortCode(data.geo[0], data.geo[1], 15) + "?m";
       geolink.href = osm_link;
       geolink.setAttributeNS("http://www.w3.org/1999/xlink", "xlink:href", osm_link);
       geolink.setAttribute("target", "_parent");
       geolink.textContent = ort;
     }
     var dateSize = get_size(date_text);
     var distSize = get_size(dist_text);
     var descSize = get_size(desc_text);
     var geo_Size = get_size(geo__text);
     date_text.setAttribute("y", 1.5 + dateSize.height);
     dist_text.setAttribute("y", 1.5 + dateSize.height + distSize.height);
     desc_text.setAttribute("y", 1.5 + dateSize.height + distSize.height + descSize.height);
     geo__text.setAttribute("y", 1.5 + dateSize.height + distSize.height + descSize.height + geo_Size.height);

     var maxwidth = Math.max(dateSize.width, distSize.width, descSize.width, geo_Size.width);
     bg_rect.setAttribute("width", 6 + maxwidth);
     bg_rect.setAttribute("height", 6 + dateSize.height + distSize.height + descSize.height + geo_Size.height);
     setNodePosition(datainfogroup, bg_rect, getCoordinatePoint(evt));
   }

   function hidepoint() {
     document.getElementById("koordinaten").setAttribute("visibility", plotparams.showPosition ? 'shown' : 'hidden');
     var datainfogroup = document.getElementById("datainfo");
     datainfogroup.setAttribute("visibility", "hidden");
     plotparams.currentPopup = -1;
   }
 ]]></script>
 <script type="application/ecmascript" id="osmstuff"><![CDATA[
   // taken from https://github.com/openstreetmap/openstreetmap-website/blob/e84b2bd22f7c92fb7a128a91c999f86e350bf04d/app/assets/javascripts/application.js
   function makeShortCode(lat, lon, zoom) {
     var char_array = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789_~";
     var x = Math.round((lon + 180.0) * ((1 << 30) / 90.0));
     var y = Math.round((lat +  90.0) * ((1 << 30) / 45.0));
     // JavaScript only has to keep 32 bits of bitwise operators, so this has to be
     // done in two parts. each of the parts c1/c2 has 30 bits of the total in it
     // and drops the last 4 bits of the full 64 bit Morton code.
     var str = "";
     var c1 = interlace(x >>> 17, y >>> 17), c2 = interlace((x >>> 2) & 0x7fff, (y >>> 2) & 0x7fff);
     for (var i = 0; i < Math.ceil((zoom + 8) / 3.0) && i < 5; ++i) {
       var digit = (c1 >> (24 - 6 * i)) & 0x3f;
       str += char_array.charAt(digit);
     }
     for (var i = 5; i < Math.ceil((zoom + 8) / 3.0); ++i) {
       var digit = (c2 >> (24 - 6 * (i - 5))) & 0x3f;
       str += char_array.charAt(digit);
     }
     for (var i = 0; i < ((zoom + 8) % 3); ++i) {
       str += "-";
     }
     return str;
   }

   function interlace(x, y) {
     x = (x | (x << 8)) & 0x00ff00ff;
     x = (x | (x << 4)) & 0x0f0f0f0f;
     x = (x | (x << 2)) & 0x33333333;
     x = (x | (x << 1)) & 0x55555555;

     y = (y | (y << 8)) & 0x00ff00ff;
     y = (y | (y << 4)) & 0x0f0f0f0f;
     y = (y | (y << 2)) & 0x33333333;
     y = (y | (y << 1)) & 0x55555555;
     return (x << 1) | y;
   }
 ]]></script>
 <g transform="translate(80,550)">
  <rect x="0" y="-490" height="490" width="640" style="fill: #ffffe0; stroke: #000000; fill-opacity:.3" onclick="toggle_coordinateshow(evt)" onmousemove="showcoordinates(evt)"/>
  <g class="xaxis" id="xaxis" />
  <g class="yaxis" id="yaxis" />
  <g id="dataarea" />
  <g id="datainfo">
    <rect id="datainfo_background" x="0" y="0" style="fill: #ffffff; stroke: #000000; stroke-width: 1; " onclick="hidepoint()"/>
    <text id="datainfo_date" x="3" />
    <text id="datainfo_value" x="3" />
    <text id="datainfo_description" x="3" />
    <text id="datainfo_geo" x="3" />
  </g>
  <text id="koordinaten" visibility="hidden">Koordinaten</text>
 </g>
 <g transform="translate(225,500)">
  <rect x="0" y="-150" height="150" width="250" style="fill: #ffffff; stroke: #000000; fill-opacity:.8" />
  <g class="xaxis" id="inlet_xaxis" />
  <g class="yaxis" id="inlet_yaxis" />
  <g id="inlet_dataarea" />
 </g>
</svg>
